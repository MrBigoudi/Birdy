{"ast":null,"code":"import _asyncToGenerator from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import*as ROUTES from\"../constants/routes.js\";import BirdyLogo from\"../atomComponents/Birdy-logo.js\";import\"../stylesheets/pages/signup.css\";import\"../stylesheets/form.css\";// import { checkAlreadyExist, addUserFromSignup } from \"../database/users.js\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(){/*\n    const server_config = {\n        headers: {\n            'Access-Control-Allow-Origin': \"*\",\n            'Content-Type': 'application/json:charset=UTF-8',\n        }\n    }\n    */useEffect(function(){document.title=\"Signup - Birdy\";},[]);var onFocusHandler=function onFocusHandler(e){e.target.type=\"date\";};var onBlurHandler=function onBlurHandler(e){e.target.type=\"text\";};var navigate=useNavigate();var _useState=useState({username:\"\",dateOfBirth:\"\",fullname:\"\",emailAddress:\"\",passwd:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var isInvalid=formData.passwd===\"\"||formData.emailAddress===\"\"||formData.username===\"\"||formData.dateOfBirth===\"\"||formData.fullname===\"\";function handleChange(event){setFormData(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},event.target.name,event.target.value));});};var answer_signup=function answer_signup(res){//console.log('res.data: ', res.data);\nif(res.data['status']!==201){setError(res.data['message']);console.log('error: ',error);}else{var _id=res.data['id'];//console.log('user_id: ', _id);\nnavigate(\"/p/\".concat(_id),{user_id:_id,state:{},replace:true});}};var answer_signup_err=function answer_signup_err(err){if(err.response){// The request was made and the server responded with a status code\n// that falls out of the range of 2xx\nconsole.log('err.response.data: ',err.response.data);console.log('err.response.status: ',err.response.status);console.log('err.response.headers: ',err.response.headers);setError(err.response.data['message']);}else if(err.request){// The request was made but no response was received\n// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n// http.ClientRequest in node.js\nconsole.log(err.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.log('Error',err.message);}console.log(err.config);};var handleSignup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();axios.post(\"/api/user/signup\",formData).then(function(res){//console.log('then');\nanswer_signup(res);}).catch(function(err){//console.log('catch');\nanswer_signup_err(err);});/*\n        try{\n            await checkAlreadyExist(formData.username, formData.emailAddress);\n            addUserFromSignup(formData);\n            navigate(ROUTES.PROFILE);\n        } catch (err) {\n            setError(err.message);\n        }\n        */case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSignup(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{className:\"form-page-main column gap20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-container column gap20\",children:[/*#__PURE__*/_jsx(BirdyLogo,{}),/*#__PURE__*/_jsxs(\"form\",{className:\"base-form column\",onSubmit:handleSignup,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",placeholder:\"Username\",\"aria-label\":\"Enter your username\",name:\"username\",onChange:handleChange,value:formData.username}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",placeholder:\"Fullname\",\"aria-label\":\"Enter your fullname\",name:\"fullname\",onChange:handleChange,value:formData.fullname}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input signup-birthday\",type:\"text\",onFocus:onFocusHandler,onBlur:onBlurHandler,placeholder:\"Date of Birth\",\"aria-label\":\"Enter your date of birth\",name:\"dateOfBirth\",onChange:handleChange,value:formData.dateOfBirth}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"email\",placeholder:\"Email address\",\"aria-label\":\"Enter your email address\",name:\"emailAddress\",onChange:handleChange,value:formData.emailAddress}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",placeholder:\"Password\",\"aria-label\":\"Enter your password\",name:\"passwd\",onChange:handleChange,value:formData.passwd}),/*#__PURE__*/_jsx(\"input\",{className:\"form-submit \".concat(isInvalid&&\"submit-invalid\"||\"submit\"),type:\"submit\",value:\"Sign Up\",disabled:isInvalid})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message form-error\",children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:\"base-form-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Have an account?\\u2002\",/*#__PURE__*/_jsx(Link,{className:\"link-route\",to:ROUTES.LOGIN,children:\"Log in\"})]})})]});};","map":{"version":3,"sources":["/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/src/pages/Signup.js"],"names":["React","useState","useEffect","Link","useNavigate","axios","ROUTES","BirdyLogo","Signup","document","title","onFocusHandler","e","target","type","onBlurHandler","navigate","username","dateOfBirth","fullname","emailAddress","passwd","formData","setFormData","error","setError","isInvalid","handleChange","event","prev","name","value","answer_signup","res","data","console","log","_id","user_id","state","replace","answer_signup_err","err","response","status","headers","request","message","config","handleSignup","preventDefault","post","then","catch","LOGIN"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport * as ROUTES from \"../constants/routes.js\";\n\nimport BirdyLogo from \"../atomComponents/Birdy-logo.js\";\nimport \"../stylesheets/pages/signup.css\";\nimport \"../stylesheets/form.css\";\n\n// import { checkAlreadyExist, addUserFromSignup } from \"../database/users.js\";\n\nexport default function Signup(){\n    /*\n    const server_config = {\n        headers: {\n            'Access-Control-Allow-Origin': \"*\",\n            'Content-Type': 'application/json:charset=UTF-8',\n        }\n    }\n    */\n\n    useEffect( () => {\n        document.title = \"Signup - Birdy\";\n    },[]);\n\n    const onFocusHandler = (e) => {\n        e.target.type = \"date\";\n    };\n\n    const onBlurHandler = (e) => {\n        e.target.type = \"text\";\n    };\n\n    const navigate = useNavigate();\n\n    const [formData, setFormData] = useState(\n        {username:\"\", dateOfBirth:\"\", fullname:\"\", emailAddress:\"\", passwd:\"\"}\n    );\n\n    const [error, setError] = useState(true);\n\n    const isInvalid = formData.passwd === \"\" || formData.emailAddress === \"\" \n                        || formData.username === \"\" || formData.dateOfBirth === \"\"\n                        || formData.fullname === \"\";\n\n    function handleChange(event){\n        setFormData( prev => {\n            return {\n                ...prev,\n                [event.target.name]: event.target.value\n            }\n        })\n    };\n\n    const answer_signup = (res) => {\n        //console.log('res.data: ', res.data);\n        if(res.data['status'] !== 201){\n            setError(res.data['message']);\n            console.log('error: ', error);\n        }else{\n            const _id = res.data['id'];\n            //console.log('user_id: ', _id);\n            navigate(`/p/${_id}`, { user_id: _id, state: {}, replace: true, });\n        }\n    }\n\n    const answer_signup_err = (err) => {\n        if (err.response) {\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            console.log('err.response.data: ',    err.response.data);\n            console.log('err.response.status: ',  err.response.status);\n            console.log('err.response.headers: ', err.response.headers);\n            setError(err.response.data['message']);\n        } else if (err.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            console.log(err.request);\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            console.log('Error', err.message);\n        }\n        \n        console.log(err.config);\n    }\n\n    const handleSignup = async (event) => {\n        event.preventDefault();\n        axios\n            .post(\"/api/user/signup\", formData)\n            .then( (res) => {\n                //console.log('then');\n                answer_signup(res);\n            })\n            .catch( (err) => {\n                //console.log('catch');\n                answer_signup_err(err);\n            });\n        /*\n        try{\n            await checkAlreadyExist(formData.username, formData.emailAddress);\n            addUserFromSignup(formData);\n            navigate(ROUTES.PROFILE);\n        } catch (err) {\n            setError(err.message);\n        }\n        */\n    }\n    \n    return(\n        <main className=\"form-page-main column gap20\">\n            <div className=\"form-container column gap20\">\n                <BirdyLogo />\n                <form className=\"base-form column\" onSubmit={handleSignup}>\n                    <input\n                        className=\"form-input\" \n                        type=\"text\" \n                        placeholder=\"Username\" \n                        aria-label=\"Enter your username\"\n                        name=\"username\"\n                        onChange={handleChange}\n                        value={formData.username}\n                    />\n                    <input\n                        className=\"form-input\" \n                        type=\"text\" \n                        placeholder=\"Fullname\" \n                        aria-label=\"Enter your fullname\"\n                        name=\"fullname\"\n                        onChange={handleChange}\n                        value={formData.fullname}\n                    />\n                    <input\n                        className=\"form-input signup-birthday\"\n                        type=\"text\"\n                        onFocus={onFocusHandler}\n                        onBlur={onBlurHandler}\n                        placeholder=\"Date of Birth\"\n                        aria-label=\"Enter your date of birth\"\n                        name=\"dateOfBirth\"\n                        onChange={handleChange}\n                        value={formData.dateOfBirth}\n                    />\n                    <input\n                        className=\"form-input\" \n                        type=\"email\" \n                        placeholder=\"Email address\" \n                        aria-label=\"Enter your email address\"\n                        name=\"emailAddress\"\n                        onChange={handleChange}\n                        value={formData.emailAddress}\n                    />\n                    <input\n                        className=\"form-input\" \n                        type=\"password\" \n                        placeholder=\"Password\" \n                        aria-label=\"Enter your password\"\n                        name=\"passwd\"\n                        onChange={handleChange}\n                        value={formData.passwd}                   \n                    />\n                    <input \n                        className={`form-submit ${(isInvalid && \"submit-invalid\") || \"submit\"}`}\n                        type=\"submit\" \n                        value=\"Sign Up\"\n                        disabled={isInvalid}\n                    />\n                </form>\n                {error && <p className=\"error-message form-error\">{error}</p>}\n            </div>\n            <div className=\"base-form-footer\">\n                <p>\n                    Have an account?&ensp;\n                    <Link className=\"link-route\" to={ROUTES.LOGIN}>\n                        Log in\n                    </Link>\n                </p>\n            </div>\n        </main>\n    )\n};"]},"metadata":{},"sourceType":"module"}