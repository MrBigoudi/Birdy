{"ast":null,"code":"import _slicedToArray from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import{useParams,useLocation,useNavigate}from\"react-router-dom\";import axios from\"axios\";import NavBar from\"../components/NavBar/NavBar.js\";import Timeline from\"../components/Timeline/Timeline.js\";import SideBar from\"../components/SideBar/SideBar.js\";/* images */import logoHome from\"../images/icons/navBarIcons/outline_home_white_24dp_2x.png\";import logoExplore from\"../images/icons/navBarIcons/outline_tag_white_24dp_2x.png\";import logoNotifications from\"../images/icons/navBarIcons/outline_notifications_white_24dp_2x.png\";import logoMessages from\"../images/icons/navBarIcons/outline_email_white_24dp_2x.png\";import logoBookmark from\"../images/icons/navBarIcons/outline_bookmark_border_white_24dp_2x.png\";import logoLists from\"../images/icons/navBarIcons/outline_list_alt_white_24dp_2x.png\";import logoProfile from\"../images/icons/navBarIcons/outline_person_white_24dp_2x.png\";import logoMoreOptions from\"../images/icons/navBarIcons/outline_more_horiz_white_24dp_2x.png\";// import { tweets } from \"../database/tweets.js\";\n// import { users } from \"../database/users.js\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MAX_NB_TWEETS=100;export default function Profile(){var _useLocation=useLocation(),state=_useLocation.state;var navigate=useNavigate();useEffect(function(){document.title=\"Profile - Birdy\";function getListTweets(){return _getListTweets.apply(this,arguments);}function _getListTweets(){_getListTweets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var alreadyLogged,userId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:alreadyLogged=state.alreadyLogged,userId=state.userId;setAlreadyLogged({alreadyLogged:alreadyLogged,userId:userId});if(!alreadyLogged){_context.next=7;break;}_context.next=5;return axios.get(\"/apiTweet/tweet/\".concat(userId,\"/\").concat(MAX_NB_TWEETS)).then(function(res){setTweets(res.data);});case 5:_context.next=9;break;case 7:_context.next=9;return axios.get(\"/apiTweet/tweet/getNTweets/\".concat(MAX_NB_TWEETS)).then(function(res){//console.log('tweets: ', res.data);\nsetTweets(res.data);});case 9:case\"end\":return _context.stop();}}},_callee);}));return _getListTweets.apply(this,arguments);}getListTweets();},[state]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tweets=_useState2[0],setTweets=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),alreadyLogged=_useState4[0],setAlreadyLogged=_useState4[1];function handleBackToUserPage(event){event.preventDefault();navigate(\"/p/\".concat(user_id),{state:{alreadyLogged:false,userId:user_id},replace:false});}function handleListTweet(event){event.preventDefault();navigate(\"/p/\".concat(user_id),{state:{alreadyLogged:true,userId:user_id},replace:false});}var menuIcons=[{id:\"profile-home\",src:logoHome,alt:\"home menu\",msg:\"Home\",onClick:handleBackToUserPage},{id:\"profile-explore\",src:logoExplore,alt:\"explore menu\",msg:\"Explore\"},{id:\"profile-notifications\",src:logoNotifications,alt:\"notification menu\",msg:\"Notifications\"},{id:\"profile-messages\",src:logoMessages,alt:\"messages menu\",msg:\"Messages\"},{id:\"profile-bookmarks\",src:logoBookmark,alt:\"bookmarks menu\",msg:\"Bookmarks\"},{id:\"profile-lists\",src:logoLists,alt:\"lists menu\",msg:\"Lists\",onClick:handleListTweet},{id:\"profile-profile\",src:logoProfile,alt:\"profile menu\",msg:\"Profile\"},{id:\"profile-more\",src:logoMoreOptions,alt:\"more option menu\",msg:\"More\"}];//console.log('params: ', useParams())\nvar user_id=useParams()['id'];var _useState5=useState(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/api/user/\".concat(user_id)).then(function(res){//console.log('user: ', res.data);\nsetUser(res.data);});case 2:case\"end\":return _context2.stop();}}},_callee2);}))),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];function scrollToTop(){document.getElementById(\"timeline-main\").scrollTo({top:0,behavior:\"smooth\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile row max-height\",children:[/*#__PURE__*/_jsx(NavBar,{logged:true,menuIcons:menuIcons}),/*#__PURE__*/_jsx(Timeline,{scroll:scrollToTop,default:false,tweets:tweets,user:user}),/*#__PURE__*/_jsx(SideBar,{logged:true,user:alreadyLogged['alreadyLogged']?alreadyLogged['userId']:user_id,connectedUser:alreadyLogged['alreadyLogged']?user_id:false})]});};","map":{"version":3,"sources":["/home/mrbigoudi/Documents/Projects/Birdy/birdy-client/src/pages/Profile.js"],"names":["React","useEffect","useState","useParams","useLocation","useNavigate","axios","NavBar","Timeline","SideBar","logoHome","logoExplore","logoNotifications","logoMessages","logoBookmark","logoLists","logoProfile","logoMoreOptions","MAX_NB_TWEETS","Profile","state","navigate","document","title","getListTweets","alreadyLogged","userId","setAlreadyLogged","get","then","res","setTweets","data","tweets","handleBackToUserPage","event","preventDefault","user_id","replace","handleListTweet","menuIcons","id","src","alt","msg","onClick","setUser","user","scrollToTop","getElementById","scrollTo","top","behavior"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams, useLocation, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport NavBar from \"../components/NavBar/NavBar.js\";\nimport Timeline from \"../components/Timeline/Timeline.js\";\nimport SideBar from \"../components/SideBar/SideBar.js\";\n\n/* images */\nimport logoHome from \"../images/icons/navBarIcons/outline_home_white_24dp_2x.png\";\nimport logoExplore from \"../images/icons/navBarIcons/outline_tag_white_24dp_2x.png\";\nimport logoNotifications from \"../images/icons/navBarIcons/outline_notifications_white_24dp_2x.png\";\nimport logoMessages from \"../images/icons/navBarIcons/outline_email_white_24dp_2x.png\";\nimport logoBookmark from \"../images/icons/navBarIcons/outline_bookmark_border_white_24dp_2x.png\";\nimport logoLists from \"../images/icons/navBarIcons/outline_list_alt_white_24dp_2x.png\";\nimport logoProfile from \"../images/icons/navBarIcons/outline_person_white_24dp_2x.png\";\nimport logoMoreOptions from \"../images/icons/navBarIcons/outline_more_horiz_white_24dp_2x.png\";\n\n// import { tweets } from \"../database/tweets.js\";\n// import { users } from \"../database/users.js\";\n\nconst MAX_NB_TWEETS = 100;\n\nexport default function Profile(){\n    const {state} = useLocation();\n    const navigate = useNavigate();\n\n    useEffect( () => {\n        document.title = \"Profile - Birdy\";\n        async function getListTweets() {\n            let {alreadyLogged, userId} = state;\n            setAlreadyLogged({alreadyLogged, userId});\n            if(alreadyLogged){\n                //console.log('test already logged');\n                await axios\n                    .get(`/apiTweet/tweet/${userId}/${MAX_NB_TWEETS}`)\n                    .then( (res) => {\n                        setTweets(res.data);\n                    });\n            } else {\n                await axios\n                        .get(`/apiTweet/tweet/getNTweets/${MAX_NB_TWEETS}`)\n                        .then( (res) => {\n                            //console.log('tweets: ', res.data);\n                            setTweets(res.data);\n                        });\n                }\n            }\n        getListTweets();\n    }, [state]);\n\n    const [tweets, setTweets] = useState([]);\n    const [alreadyLogged, setAlreadyLogged] = useState({})\n\n    function handleBackToUserPage(event){\n        event.preventDefault();\n        navigate(`/p/${user_id}`, { state: { alreadyLogged: false, userId: user_id }, replace: false, });\n    }\n\n    function handleListTweet(event){\n        event.preventDefault();\n        navigate(`/p/${user_id}`, { state: { alreadyLogged: true, userId: user_id }, replace: false, });\n    }\n\n    const menuIcons = [\n        {id:\"profile-home\", src:logoHome, alt:\"home menu\", msg:\"Home\", onClick:handleBackToUserPage},\n        {id:\"profile-explore\", src:logoExplore, alt:\"explore menu\", msg:\"Explore\"},\n        {id:\"profile-notifications\", src:logoNotifications, alt:\"notification menu\", msg:\"Notifications\"},\n        {id:\"profile-messages\", src:logoMessages, alt:\"messages menu\", msg:\"Messages\"},\n        {id:\"profile-bookmarks\", src:logoBookmark, alt:\"bookmarks menu\", msg:\"Bookmarks\"},\n        {id:\"profile-lists\", src:logoLists, alt:\"lists menu\", msg:\"Lists\", onClick:handleListTweet},\n        {id:\"profile-profile\", src:logoProfile, alt:\"profile menu\", msg:\"Profile\"},\n        {id:\"profile-more\", src:logoMoreOptions, alt:\"more option menu\", msg:\"More\"}\n    ];\n\n    //console.log('params: ', useParams())\n    const user_id = useParams()['id'];\n\n    const [user, setUser] = useState(\n        async () => {\n            await axios\n                .get(`/api/user/${user_id}`)\n                .then( (res) => {\n                    //console.log('user: ', res.data);\n                    setUser(res.data);\n                });\n        }\n    );\n\n    function scrollToTop() {\n        document.getElementById(\"timeline-main\").scrollTo({\n          top: 0,\n          behavior: \"smooth\"\n        });\n      }\n\n    return(\n        <div className=\"profile row max-height\">\n            <NavBar logged={true} menuIcons={menuIcons}/>\n            <Timeline scroll={scrollToTop} default={false} tweets={tweets} user={user}/>\n            <SideBar logged={true} user={alreadyLogged['alreadyLogged']? alreadyLogged['userId'] : user_id} connectedUser={alreadyLogged['alreadyLogged']? user_id : false}/>\n        </div>\n    )\n};"]},"metadata":{},"sourceType":"module"}