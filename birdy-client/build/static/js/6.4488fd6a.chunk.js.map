{"version":3,"sources":["pages/Signup.js"],"names":["Signup","useEffect","document","title","navigate","useNavigate","useState","username","dateOfBirth","fullname","emailAddress","passwd","formData","setFormData","error","setError","isInvalid","handleChange","event","prev","target","name","value","answer_signup","res","data","console","log","_id","user_id","state","replace","answer_signup_err","err","response","status","headers","request","message","config","handleSignup","a","preventDefault","axios","post","then","catch","className","onSubmit","type","placeholder","onChange","onFocus","e","onBlur","disabled","to","ROUTES"],"mappings":"wTAYe,SAASA,IAUpBC,qBAAW,WACPC,SAASC,MAAQ,mBACnB,IAEF,IAQMC,EAAWC,cAEjB,EAAgCC,mBAC5B,CAACC,SAAS,GAAIC,YAAY,GAAIC,SAAS,GAAIC,aAAa,GAAIC,OAAO,KADvE,mBAAOC,EAAP,KAAiBC,EAAjB,KAIA,EAA0BP,oBAAS,GAAnC,mBAAOQ,EAAP,KAAcC,EAAd,KAEMC,EAAgC,KAApBJ,EAASD,QAA2C,KAA1BC,EAASF,cACR,KAAtBE,EAASL,UAA4C,KAAzBK,EAASJ,aACf,KAAtBI,EAASH,SAEhC,SAASQ,EAAaC,GAClBL,GAAa,SAAAM,GACT,OAAO,2BACAA,GADP,kBAEKD,EAAME,OAAOC,KAAOH,EAAME,OAAOE,WAK9C,IAAMC,EAAgB,SAACC,GAEnB,GAA0B,MAAvBA,EAAIC,KAAJ,OACCV,EAASS,EAAIC,KAAJ,SACTC,QAAQC,IAAI,UAAWb,OACtB,CACD,IAAMc,EAAMJ,EAAIC,KAAJ,GAEZrB,EAAS,MAAD,OAAOwB,GAAO,CAAEC,QAASD,EAAKE,MAAO,GAAIC,SAAS,MAI5DC,EAAoB,SAACC,GACnBA,EAAIC,UAGJR,QAAQC,IAAI,sBAA0BM,EAAIC,SAAST,MACnDC,QAAQC,IAAI,wBAA0BM,EAAIC,SAASC,QACnDT,QAAQC,IAAI,yBAA0BM,EAAIC,SAASE,SACnDrB,EAASkB,EAAIC,SAAST,KAAb,UACFQ,EAAII,QAIXX,QAAQC,IAAIM,EAAII,SAGhBX,QAAQC,IAAI,QAASM,EAAIK,SAG7BZ,QAAQC,IAAIM,EAAIM,SAGdC,EAAY,uCAAG,WAAOtB,GAAP,SAAAuB,EAAA,sDACjBvB,EAAMwB,iBACNC,IACKC,KAAK,mBAAoBhC,GACzBiC,MAAM,SAACrB,GAEJD,EAAcC,MAEjBsB,OAAO,SAACb,GAELD,EAAkBC,MAVT,2CAAH,sDAuBlB,OACI,uBAAMc,UAAU,8BAAhB,UACI,sBAAKA,UAAU,8BAAf,UACI,cAAC,IAAD,IACA,uBAAMA,UAAU,mBAAmBC,SAAUR,EAA7C,UACI,uBACIO,UAAU,aACVE,KAAK,OACLC,YAAY,WACZ,aAAW,sBACX7B,KAAK,WACL8B,SAAUlC,EACVK,MAAOV,EAASL,WAEpB,uBACIwC,UAAU,aACVE,KAAK,OACLC,YAAY,WACZ,aAAW,sBACX7B,KAAK,WACL8B,SAAUlC,EACVK,MAAOV,EAASH,WAEpB,uBACIsC,UAAU,6BACVE,KAAK,OACLG,QA/GG,SAACC,GACpBA,EAAEjC,OAAO6B,KAAO,QA+GAK,OA5GE,SAACD,GACnBA,EAAEjC,OAAO6B,KAAO,QA4GAC,YAAY,gBACZ,aAAW,2BACX7B,KAAK,cACL8B,SAAUlC,EACVK,MAAOV,EAASJ,cAEpB,uBACIuC,UAAU,aACVE,KAAK,QACLC,YAAY,gBACZ,aAAW,2BACX7B,KAAK,eACL8B,SAAUlC,EACVK,MAAOV,EAASF,eAEpB,uBACIqC,UAAU,aACVE,KAAK,WACLC,YAAY,WACZ,aAAW,sBACX7B,KAAK,SACL8B,SAAUlC,EACVK,MAAOV,EAASD,SAEpB,uBACIoC,UAAS,sBAAkB/B,EAAa,iBAAqB,UAC7DiC,KAAK,SACL3B,MAAM,UACNiC,SAAUvC,OAGjBF,GAAS,mBAAGiC,UAAU,2BAAb,SAAyCjC,OAEvD,qBAAKiC,UAAU,mBAAf,SACI,uDAEI,cAAC,IAAD,CAAMA,UAAU,aAAaS,GAAIC,IAAjC,8B","file":"static/js/6.4488fd6a.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport * as ROUTES from \"../constants/routes.js\";\n\nimport BirdyLogo from \"../atomComponents/Birdy-logo.js\";\nimport \"../stylesheets/pages/signup.css\";\nimport \"../stylesheets/form.css\";\n\n// import { checkAlreadyExist, addUserFromSignup } from \"../database/users.js\";\n\nexport default function Signup(){\n    /*\n    const server_config = {\n        headers: {\n            'Access-Control-Allow-Origin': \"*\",\n            'Content-Type': 'application/json:charset=UTF-8',\n        }\n    }\n    */\n\n    useEffect( () => {\n        document.title = \"Signup - Birdy\";\n    },[]);\n\n    const onFocusHandler = (e) => {\n        e.target.type = \"date\";\n    };\n\n    const onBlurHandler = (e) => {\n        e.target.type = \"text\";\n    };\n\n    const navigate = useNavigate();\n\n    const [formData, setFormData] = useState(\n        {username:\"\", dateOfBirth:\"\", fullname:\"\", emailAddress:\"\", passwd:\"\"}\n    );\n\n    const [error, setError] = useState(true);\n\n    const isInvalid = formData.passwd === \"\" || formData.emailAddress === \"\" \n                        || formData.username === \"\" || formData.dateOfBirth === \"\"\n                        || formData.fullname === \"\";\n\n    function handleChange(event){\n        setFormData( prev => {\n            return {\n                ...prev,\n                [event.target.name]: event.target.value\n            }\n        })\n    };\n\n    const answer_signup = (res) => {\n        //console.log('res.data: ', res.data);\n        if(res.data['status'] !== 201){\n            setError(res.data['message']);\n            console.log('error: ', error);\n        }else{\n            const _id = res.data['id'];\n            //console.log('user_id: ', _id);\n            navigate(`/p/${_id}`, { user_id: _id, state: {}, replace: true, });\n        }\n    }\n\n    const answer_signup_err = (err) => {\n        if (err.response) {\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            console.log('err.response.data: ',    err.response.data);\n            console.log('err.response.status: ',  err.response.status);\n            console.log('err.response.headers: ', err.response.headers);\n            setError(err.response.data['message']);\n        } else if (err.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            console.log(err.request);\n        } else {\n            // Something happened in setting up the request that triggered an Error\n            console.log('Error', err.message);\n        }\n        \n        console.log(err.config);\n    }\n\n    const handleSignup = async (event) => {\n        event.preventDefault();\n        axios\n            .post(\"/api/user/signup\", formData)\n            .then( (res) => {\n                //console.log('then');\n                answer_signup(res);\n            })\n            .catch( (err) => {\n                //console.log('catch');\n                answer_signup_err(err);\n            });\n        /*\n        try{\n            await checkAlreadyExist(formData.username, formData.emailAddress);\n            addUserFromSignup(formData);\n            navigate(ROUTES.PROFILE);\n        } catch (err) {\n            setError(err.message);\n        }\n        */\n    }\n    \n    return(\n        <main className=\"form-page-main column gap20\">\n            <div className=\"form-container column gap20\">\n                <BirdyLogo />\n                <form className=\"base-form column\" onSubmit={handleSignup}>\n                    <input\n                        className=\"form-input\" \n                        type=\"text\" \n                        placeholder=\"Username\" \n                        aria-label=\"Enter your username\"\n                        name=\"username\"\n                        onChange={handleChange}\n                        value={formData.username}\n                    />\n                    <input\n                        className=\"form-input\" \n                        type=\"text\" \n                        placeholder=\"Fullname\" \n                        aria-label=\"Enter your fullname\"\n                        name=\"fullname\"\n                        onChange={handleChange}\n                        value={formData.fullname}\n                    />\n                    <input\n                        className=\"form-input signup-birthday\"\n                        type=\"text\"\n                        onFocus={onFocusHandler}\n                        onBlur={onBlurHandler}\n                        placeholder=\"Date of Birth\"\n                        aria-label=\"Enter your date of birth\"\n                        name=\"dateOfBirth\"\n                        onChange={handleChange}\n                        value={formData.dateOfBirth}\n                    />\n                    <input\n                        className=\"form-input\" \n                        type=\"email\" \n                        placeholder=\"Email address\" \n                        aria-label=\"Enter your email address\"\n                        name=\"emailAddress\"\n                        onChange={handleChange}\n                        value={formData.emailAddress}\n                    />\n                    <input\n                        className=\"form-input\" \n                        type=\"password\" \n                        placeholder=\"Password\" \n                        aria-label=\"Enter your password\"\n                        name=\"passwd\"\n                        onChange={handleChange}\n                        value={formData.passwd}                   \n                    />\n                    <input \n                        className={`form-submit ${(isInvalid && \"submit-invalid\") || \"submit\"}`}\n                        type=\"submit\" \n                        value=\"Sign Up\"\n                        disabled={isInvalid}\n                    />\n                </form>\n                {error && <p className=\"error-message form-error\">{error}</p>}\n            </div>\n            <div className=\"base-form-footer\">\n                <p>\n                    Have an account?&ensp;\n                    <Link className=\"link-route\" to={ROUTES.LOGIN}>\n                        Log in\n                    </Link>\n                </p>\n            </div>\n        </main>\n    )\n};"],"sourceRoot":""}